<div class="container">
  <h1>Edit Performance Record</h1>

  <div *ngIf="submitting" class="loading-spinner">
    <p>Updating performance record...</p>
  </div>

  <div *ngIf="errorMessage" class="error-message">
    <p>{{ errorMessage }}</p>
  </div>

  <form [formGroup]="performanceForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="employeeId">Employee ID</label>
      <input id="employeeId" formControlName="employeeId" class="form-control"
        [class.is-invalid]="performanceForm.get('employeeId')?.invalid && performanceForm.get('employeeId')?.touched" />
      <div *ngIf="performanceForm.get('employeeId')?.invalid && performanceForm.get('employeeId')?.touched"
        class="invalid-feedback">
        Employee ID is required.
      </div>
    </div>

    <div class="form-group">
      <label for="managerId">Manager ID</label>
      <input id="managerId" formControlName="managerId" class="form-control"
        [class.is-invalid]="performanceForm.get('managerId')?.invalid && performanceForm.get('managerId')?.touched" />
      <div *ngIf="performanceForm.get('managerId')?.invalid && performanceForm.get('managerId')?.touched"
        class="invalid-feedback">
        Manager ID is required.
      </div>
    </div>

    <div class="form-group">
      <label for="goals">Goals Achieved</label>
      <input id="goals" type="checkbox" formControlName="goals" />
    </div>

    <div class="form-group">
      <label for="achievements">Achievements</label>
      <textarea id="achievements" formControlName="achievements" class="form-control"
        [class.is-invalid]="performanceForm.get('achievements')?.invalid && performanceForm.get('achievements')?.touched"></textarea>
      <div *ngIf="performanceForm.get('achievements')?.invalid && performanceForm.get('achievements')?.touched"
        class="invalid-feedback">
        Achievements are required.
      </div>
    </div>

    <div class="form-group">
      <label for="reviewDate">Review Date</label>
      <input id="reviewDate" type="date" formControlName="reviewDate" class="form-control"
        [class.is-invalid]="performanceForm.get('reviewDate')?.invalid && performanceForm.get('reviewDate')?.touched"
        [attr.disabled]="true" />
      <div *ngIf="performanceForm.get('reviewDate')?.invalid && performanceForm.get('reviewDate')?.touched"
        class="invalid-feedback">
        Review Date is required.
      </div>
    </div>

    <div class="form-group">
      <label for="rating">Rating</label>
      <input id="rating" type="number" formControlName="rating" class="form-control"
        [class.is-invalid]="performanceForm.get('rating')?.invalid && performanceForm.get('rating')?.touched" />
      <div *ngIf="performanceForm.get('rating')?.invalid && performanceForm.get('rating')?.touched"
        class="invalid-feedback">
        Rating is required and must be between 1 and 5.
      </div>
    </div>

    <div class="form-group">
      <label for="comments">Comments</label>
      <textarea id="comments" formControlName="comments" class="form-control"
        [class.is-invalid]="performanceForm.get('comments')?.invalid && performanceForm.get('comments')?.touched"></textarea>
    </div>

    <div class="form-group">
      <label for="bonusPercentage">Bonus Percentage</label>
      <input id="bonusPercentage" type="number" formControlName="bonusPercentage" class="form-control"
        [class.is-invalid]="performanceForm.get('bonusPercentage')?.invalid && performanceForm.get('bonusPercentage')?.touched" />
      <div *ngIf="performanceForm.get('bonusPercentage')?.invalid && performanceForm.get('bonusPercentage')?.touched"
        class="invalid-feedback">
        Bonus Percentage is required.
      </div>
    </div>

    <div class="text-center mt-4">
      <button type="submit" class="btn btn-primary" [disabled]="submitting">Submit</button>
      <button type="button" class="btn btn-secondary ml-2" (click)="onCancel()">Cancel</button>
    </div>
  </form>
</div>